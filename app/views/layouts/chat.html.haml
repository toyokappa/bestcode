!!!
%html
  %head
    %title= @title ? "#{@title} | BestCode" : "BestCode"
    %meta{ name: "viewport", content: "width=device-width, initial-scale=1.0" }
    = csrf_meta_tags
    = csp_meta_tag
    = webpack_css_tag("main.css")
    = javascript_include_tag webpack_assets_path("main.js")
  %body.fixed-aside.fixed-content
    #app.app
      #aside.app-aside.box-shadow-x.fade.nav-expand{ aria: { hidden: true } }
        .sidenav.dk.dark.modal-dialog
          .navbar.lt
            = link_to users_root_path, class: "navbar-brand" do
              %svg{ height: "28", viewbox: ("0 0 24 24"), width: "28", xmlns: "http://www.w3.org/2000/svg" }
                %path{ d: ("M0 0h24v24H0z"), fill: "none" }
                %path.fill-theme{ d: ("M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z"), fill:"#fff" }
              %span.hidden-folded.d-inline BestCode
          .flex.hide-scroll
            .scroll
              .nav-border.b-primary{ data: { nav: true } }
                %ul.nav
                  %li.nav-header.hidden-folded.mt-2
                    %span.text-xs.hidden-folded
                  %li
                    = link_to users_repos_path do
                      - pulls_count = current_user.pulls.with_hooked_repos.count
                      - if pulls_count > 0
                        %span.nav-badge
                          %b.badge.badge-sm.badge-pill.danger
                            = pulls_count
                      %span.nav-icon
                        %i.fa.fa-folder-open
                      %span.nav-text
                        Myリポジトリ
                  %li
                    = link_to users_my_rooms_path do
                      - active_state_count = current_user.active_state_count_for_reviewer + current_user.active_state_count_for_reviewee
                      -if active_state_count > 0
                        %span.nav-badge
                          %b.badge.badge-sm.badge-pill.danger
                            = active_state_count
                      %span.nav-icon
                        %i.fa.fa-home
                      %span.nav-text
                        Myルーム
                  %li
                    = link_to users_rooms_path do
                      %span.nav-icon
                        %i.fa.fa-home
                      %span.nav-text
                        ルーム一覧
          .no-shrink.lt
            .nav-fold
              .hidden-folded.flex.p-2-3.bg
                .d-flex.p-1
                  = link_to users_sign_out_path, method: :delete do
                    %i.fa.fa-power-off.text-muted.mr-1
                    %span ログアウト
      #content.app-content.box-shadow-0{ role: :main }
        #content-header.content-header.white.box-shadow-0.d-lg-none
          .navbar.navbar-expand-lg
            %a.d-lg-none.mx-2{ data: { toggle: "modal", target: "#aside" } }
              %i.fa.fa-bars{ style: "font-size: 20px; margin-top: 3px;" }
            #pageTitle.navbar-text.nav-title.flex= @title || "ダッシュボード"
            %ul.nav.flex-row.order-lg-2
              %li.dropdown.d-flex.align-items-center
                = link_to '#', class: 'd-flex align-items-center', data: { toggle: 'dropdown' } do
                  %span.avatar.w-32
                    = image_tag current_user.check_and_return_image(:thumb), alt: '...'
                .dropdown-menu.dropdown-menu-right.w.pt-2.mt-2.animate.fadeIn
                  = link_to users_profile_path(current_user.name), class: "dropdown-item" do
                    %b= current_user.name
                  - if current_user.reviewer?
                    .dropdown-divider
                    = link_to new_users_room_path, class: 'dropdown-item' do
                      %span ルームを作成
                  .dropdown-divider
                  = link_to 'ログアウト', users_sign_out_path, method: :delete, class: 'dropdown-item'
        #content-main.content-main.d-flex.flex
          - flash.each do |message_type, message|
            = content_tag :div, class: "alert alert-#{message_type} alert-dismissible mb-0", role: "alert" do
              = message
              %button.close{ type: "button", data: { dismiss: "alert" }, aria: { label: "Close" } }
                %span{ aria: { hidden: true } } &times;
          = yield
